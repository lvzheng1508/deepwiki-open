# .env 文件使用说明

## ✅ 当前配置状态

DeepWiki 项目已经正确配置为直接使用 `.env` 文件，无需使用 `env.example` 作为运行时环境变量。

## 🔧 配置说明

### 1. Docker Compose 配置
在 `docker-compose.yml` 中：
```yaml
env_file:
  - .env  # 直接加载 .env 文件
```

### 2. Docker 容器启动脚本
在 `Dockerfile` 的启动脚本中：
```bash
# Load environment variables from .env file if it exists
if [ -f .env ]; then
  export $(grep -v "^#" .env | xargs -r)
fi
```

## 🚀 使用方法

### 步骤 1: 创建 .env 文件
```bash
# 从模板创建 .env 文件
cp env.example .env
```

### 步骤 2: 配置 API 密钥
编辑 `.env` 文件，至少配置以下一个 API 密钥：
```bash
# Google Gemini API 密钥
GOOGLE_API_KEY=your_google_api_key_here

# 或 OpenAI API 密钥
OPENAI_API_KEY=your_openai_api_key_here
```

### 步骤 3: 启动应用
```bash
# Docker Compose 会自动加载 .env 文件
docker-compose up -d
```

## 📝 环境变量优先级

1. **容器内 .env 文件**（如果存在）
2. **docker-compose.yml 中指定的 .env 文件**
3. **容器启动时传入的环境变量**

## 🔒 安全建议

- 将 `.env` 文件添加到 `.gitignore` 中，避免提交敏感信息
- 在生产环境中使用环境变量而非文件
- 定期更新 API 密钥

## 🛠️ 验证配置

启动容器后，可以通过以下命令验证环境变量是否正确加载：

```bash
# 查看容器环境变量
docker exec deepwiki-open-deepwiki-1 env | grep API_KEY

# 查看应用日志
docker-compose logs -f
```

